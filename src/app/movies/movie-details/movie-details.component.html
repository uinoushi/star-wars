<ng-container *ngIf="movie">
  <header class="module-header">
    <h4>Filmdeatils</h4>
    <hr />
    <h3>{{ movie.title }}</h3>
    <h4>Episode {{ movie.episode_id }}</h4>
  </header>
  <div class="card m--column m-b">
    <div class="card-body m--left">
      <div class="pad">
        <h5 class="card-title">{{ movie.title }}</h5>
        <ul class="list-unstyled m-b">
          <li class="card-text">
            <strong>Director:</strong> {{ movie.director }}
          </li>
          <li class="card-text">
            <strong>Produzenten:</strong> {{ movie.producer }}
          </li>
          <li class="card-text">
            <strong>Release Date:</strong>
            {{ movie.release_date | date: "dd.MM.yyyy" }}
          </li>
        </ul>
        <p class="card-text">
          {{ movie.opening_crawl }}
        </p>
      </div>
    </div>
    <div class="card-img">
      <app-poster></app-poster>
    </div>
  </div>
  <div *ngIf="vm$ | async as vm">
    <app-data-bank-entity-list
      [label]="'Charaktere'"
      [items]="vm.characters"
      (navigate)="navigate($event, 'characters')"
      (add)="openChooseUsersPopup(charactersForm)"
    ></app-data-bank-entity-list>
    <app-data-bank-entity-list
      [label]="'Planeten'"
      [items]="vm.planets"
      (navigate)="navigate($event, 'planets')"
      (add)="openChooseUsersPopup(planetsForm)"
    ></app-data-bank-entity-list>
  </div>
</ng-container>

<ng-template #charactersForm>
  <app-add-character
    (close)="closeChooseUsersPopup(charactersForm)"
  ></app-add-character>
</ng-template>

<ng-template #planetsForm>
  <app-add-planets
    (close)="closeChooseUsersPopup(planetsForm)"
  ></app-add-planets>
</ng-template>
